# ServerTools 服务器工具箱

- **作者**: 少司命
- **出处**: 无
- 该插件提供更多指令与功能方便管理服务器

## 更新日志

```
V1.1.7.0
修复手游恶魔之心格子不正确问题
使用_timer字段加快清除速度

V1.1.6.0
添加NPC保护
添加禁止肉前第七格饰品栏

V1.1.5.0
给禁双饰品加入清理物品方法，避免重复刷控制台。
只检测Armor前10个格子

V1.1.4.0
只检查当前装备页与饰品栏
给禁双饰品加免检权限：servertool.armor.white
修复空饰品时的误判

V1.1.3.0
配置项加了【禁双饰品】
为兼容旧版添加2个别名命令
给/查花苞加了个字母命令：/scp
给/移除花苞加了个字母命令：/rcp

V1.1.2.0
给Tshock自带的/ai指令 加入了查询指定玩家的账户ID

V1.1.1.0
1.修复禁止怪物捡钱
2.移除了禁止快速放入箱子

V1.1.0.0
添加双箱限制

V1.0.0.4
修复使用Rest时无法使用ban指令的问题

V1.0.0.3
修复死亡排行添加数据库报错
修复死亡倒计时
```

## 指令

| 语法                                                 |          权限          |               说明               |
| ---------------------------------------------------- | :--------------------: | :------------------------------: |
| /clp [范围]                                          |      tshock.clear      |    清理弹幕但不清理玩家召唤物    |
| /查花苞                                              | servertool.query.wall  | 查找地图上的花苞并添加到 Warp 里 |
| /移除花苞                                            | servertool.query.wall  |       移除调 Warp 里的花苞       |
| /自踢                                                |  servertool.user.kick  |         将自己踢出服务器         |
| /自杀                                                |  servertool.user.kill  |             杀死自己             |
| /ghost                                               | servertool.user.ghost  |    切换到幽灵状态再次使用复原    |
| /旅途难度 [难度]`master` `journey` `normal` `expert` | servertool.set.journey |         设置旅途模式难度         |
| /在线排行                                            | servertool.user.online |         查询玩家在线排行         |
| /死亡排行                                            |  servertool.user.dead  |         查询玩家死亡排行         |

## REST API

| 路径            |       说明       |
| --------------- | :--------------: |
| /deathrank      | 查询死亡排行数据 |
| /onlineDuration | 查询在线排行数据 |

## 配置
> 配置文件位置：tshock/ServerTools.json

```json
{
  "死亡延续": true,
  "限制哨兵数量": 10,
  "仅允许软核进入": false,
  "是否设置世界模式": true,
  "世界模式": 2,
  "设置旅途模式难度": false,
  "旅途模式难度": "master",
  "阻止未注册进入": true,
  "禁止怪物捡钱": true,
  "清理掉落物": false,
  "禁止多鱼线": true,
  "禁止快速放入箱子": false,
  "阻止死亡角色进入": true,
  "禁止双箱": true,
  "死亡倒计时": true,
  "死亡倒计时格式": "你还有{0}秒复活!",
  "未注册阻止语句": "未注册不能进入服务器",
  "未注册启动服务器执行命令": ["/礼包 重置"],
  "浮漂列表": []
}
```

| 字段                       |      类型       |                             说明                             |                可能的值                 |
| -------------------------- | :-------------: | :----------------------------------------------------------: | :-------------------------------------: |
| `死亡延续`                 |     `bool`      | 当玩家以死亡状态退出服务器，再次进入服务器需要等待死亡结束。 |                   空                    |
| `限制哨兵数量`             |     `int32`     |                    限制玩家可召唤哨兵数量                    |                   空                    |
| `仅允许软核进入`           |     `bool`      |                                                              |                   空                    |
| `是否设置世界模式`         |     `bool`      |                   如果为 true 设置世界模式                   |                   空                    |
| `设置世界模式`             |     `int32`     |                             难度                             | `0`为旅途 `1`为普通 `2`为专家 `3`为大师 |
| `设置旅途模式难度`         |     `bool`      |                    为 true 时设置旅途难度                    |                   空                    |
| `旅途模式难度`             |    `string`     |                             难度                             |  `master` `journey` `normal` `expert`   |
| `阻止未注册进入 `          |     `bool`      |                   阻止未注册玩家进入服务器                   |                   空                    |
| `阻止怪物捡钱 `            |     `bool`      |                    玩家死亡后怪物无法捡钱                    |                   空                    |
| `清理掉落物`               |     `bool`      |                     清理玩家死亡后掉落物                     |                   空                    |
| `禁止多鱼线 `              |     `bool`      |                     阻止玩家卡多鱼线 Bug                     |                   空                    |
| `禁止快速放入箱子 `        |     `bool`      |             禁止玩家使用快捷键将物品快速放入箱子             |                   空                    |
| `阻止死亡角色进入`         |     `bool`      |   禁止玩家以死亡状态进入服务器，需玩家进入单机模式结束死亡   |                   空                    |
| `死亡倒计时`               |     `bool`      |                      是否开启死亡倒计时                      |                   空                    |
| `禁止双箱`                 |     `bool`      |                     禁止同时打开两个箱子                     |                   空                    |
| `死亡倒计时格式`           |    `string`     |                        死亡倒计时格式                        |              `{0}`剩下时间              |
| `未注册阻止语句`           |    `string`     |                     阻止未注册玩家提示语                     |                   空                    |
| `未注册启动服务器执行命令` | `array<string>` |             当服务器启动且没有注册玩家时执行命令             |                   空                    |
| `浮漂列表`                 |  `array<int>`   |                      检测多鱼线浮漂列表                      |                   空                    |

## 反馈

- 共同维护的插件库：https://github.com/Controllerdestiny/TShockPlugin
- 国内社区 trhub.cn 或 TShock 官方群等
